using MUNitySchema.Models.Simulation;
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Text;

namespace MUNity.Schema.Simulation
{
    /// <summary>
    /// Users inside the Simulation can make Petition that can be accepted or denied by the Leader.
    /// </summary>
    public class Petition : SimulationRequest, MUNity.Models.Simulation.IPetition
    {

        /// <summary>
        /// The Id of the Petition generated by the GUID when creating a new isntance.
        /// </summary>
        public string PetitionId { get; set; }

        /// <summary>
        /// References a Petition Type.
        /// </summary>
        public int PetitionTypeId { get; set; }

        /// <summary>
        /// The current Status of the petition.
        /// </summary>
        public EPetitionStates Status { get; set; }

        /// <summary>
        /// An optional Text for the Petition.
        /// </summary>
        public string Text { get; set; }

        /// <summary>
        /// The DateTime when the Petition has been created.
        /// </summary>
        public DateTime PetitionDate { get; set; }

        /// <summary>
        /// The UserId of the Petition. This is the Real user Id not the PublicUserId.
        /// </summary>
        public int PetitionUserId { get; set; }

        /// <summary>
        /// The AgendaItem that this petition is refering to.
        /// </summary>
        public int TargetAgendaItemId { get; set; }

        /// <summary>
        /// Creates a new Petition and sets the SimulationId.
        /// </summary>
        /// <param name="simulationId"></param>
        public Petition(int simulationId)
        {
            this.PetitionId = Guid.NewGuid().ToString();
            this.Text = "";
            this.PetitionDate = DateTime.Now;
            this.SimulationId = simulationId;
        }

        /// <summary>
        /// Creates a new Petition and generates a new Guid, Text will be string.Empty and the PetitionDate the current DateTime.
        /// </summary>
        public Petition()
        {
            this.PetitionId = Guid.NewGuid().ToString();
            this.Text = "";
            this.PetitionDate = DateTime.Now;
        }
    }
}
